// Generated by CoffeeScript 1.4.0
(function() {
  var JolokiaSrv, jolokia,
    __bind = function(fn, me){ return function(){ return fn.apply(me, arguments); }; };

  jolokia = require('jolokia-client');

  /**
   * Jolokia server client wrapper.
  */


  JolokiaSrv = (function() {

    function JolokiaSrv(interval) {
      this.info_client = __bind(this.info_client, this);
      this.remove_client = __bind(this.remove_client, this);
      this.list_clients = __bind(this.list_clients, this);
      this.add_attribute = __bind(this.add_attribute, this);
      this.add_client = __bind(this.add_client, this);      this.interval = interval || 10;
      this.jclients = {};
    }

    /**
     * Add a new jolokia lookup client into the hash.
     * @param {String} (name) The name of the client to add
     * @param {String} (url) The jolokia url for the client
     * @param {Object} (attributes) The attributes to lookup for the client
     * @return {Object} The jolokia client that was added
    */


    JolokiaSrv.prototype.add_client = function(name, url, attributes) {
      return this.jclients[name] = {
        client: new jolokia(url),
        attributes: attributes || new Object()
      };
    };

    /**
     * Add a new jolokia lookup client into the hash.
     * @param {String} (name) The name of the client
     * @param {String} (attr) The name of the attribute lookup
     * @param {Object} (data) The attribute lookup information
     * @return {Object} The added attribute
    */


    JolokiaSrv.prototype.add_attribute = function(name, attr, data) {
      return this.jsclients[name][attributes][attr] = data;
    };

    /**
     * List the current jolokia clients.
     * @return {Array} The list of current clients
    */


    JolokiaSrv.prototype.list_clients = function() {
      return Object.keys(this.jclients);
    };

    /**
     * Removes a jolokia client from the hash.
     * @param {String} (name) The name of the client to remove
     * @return {String} The name of the client that was removed
    */


    JolokiaSrv.prototype.remove_client = function(name) {
      delete this.jclients[name];
      return name;
    };

    /**
     * Add a new jolokia lookup client into the hash
    */


    JolokiaSrv.prototype.info_client = function(name) {
      return this.jclients[name];
    };

    return JolokiaSrv;

  })();

  module.exports = JolokiaSrv;

}).call(this);
